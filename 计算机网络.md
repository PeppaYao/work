## HTTP原理

http协议是应用层协议，通过请求响应的方式在客户端和服务器端进行通信。

http协议是以明文的方式进行传输，并且是无状态的通信协议。

## http与https的区别

1.  传输方式：http是明文传输，极易被监听和篡改。而https加入了ssl层，数据经过了加密，从而保护了传输数据的隐私和完整性。
2.  身份认证： http没有身份认证，而https经过证书颁发机构的多重认证。
3.  连接端口：http为80  https为443
4.  实现成本：http基本没有成本，https需要申请证书，同时在加密解密上需要消耗更多的CPU资源，访问速度有可能降低。

## get和post的区别

都是http的请求方式。

区别在于：

1.  用途上：get一般用于获取和查询资源，post一般用于更新资源信息。
2.  位置上：get请求的的数据会在地址栏上显示出来，以问号分割url与传输数据，多个参数用取地址符连接。而post的数据放在请求体中。
3.  安全性上：优于get将信息显示在地址栏，所以对于用户密码等个人隐私信息很不安全，而post放在请求体中，在安全性上要稍微好点。
4.  长度限制：get使用地址栏发送数据，而地址栏的长度是有限的。
5.  幂等性上：get操作没有副作用，多次操作产生的副作用相同，所以get是幂等的，而post用于创建资源是会又副作用的，所以post不是幂等的。

## TCP和UDP的区别

1.  TCP: **面向连接的安全的流式协议**，连接的时候进行三次握手，数据发送的时候会进行数据确认，数据丢失之后，会进行数据重传。 
2.  UDP: **面向无连接的不安全的报文传输**，发出去就不管了，收则全收，丢则全丢。

## 3次握手和4次挥手

TCP三次握手：客户端向服务器端：发送SYN=1和序号seq 服务器端向客户端：回应确定信号同意连接ACK=1以及自己的连接请求SYN=1还有序号seq 客户端回应服务器端：ACK=1告诉对方它已经知道了服务器端同意，连接成功。 TCP四次挥手：主动关闭方发送关闭信号，被动关闭方收到信号。然后进入半关闭状态，关闭的一方能接收数据但是不能发送数据。 等到另一个未关闭的一方，发起关闭信号以后，进入TIME_WAIT状态，等待对方2MSL之后，彻底关闭。

## 3次握手55555555

客户端发起连接，也就是C语言中的connect函数，发送一个SYN=1的标志位，同时携带一个序号。

服务器端有一个accept函数，用于响应连接。服务器端响应连接后回复一个ACK=1的标志位，并且也发送一个SYN=1的标志位建立连接。

客户端收到服务器端的ACK应答以后，说明建立成功。两者都同时进入established状态。同时accept和connect函数调用成功，并返回1。

## 4次挥手55555555

主动关闭方向被动关闭放发送FIN标志位，表示要断开连接。被动关闭方同意关闭，并回发ACK标志位。此时主动关闭放进入FIN_wait_2状态。以后主动关闭方仍然可以接收数据，但是不可以再发送数据。

当另一方也决定关闭时，会发送FIN标志位，接收方回复ACK同意关闭，并且自身进入Time_wait状态，等待2MSL时长后关闭。发送方如果收到ACK应答后，就直接关闭，如果没有收到会一直发FIN标志位。

## 滑动窗口

流量控制：防止发送方发的太快，耗尽接收方的资源。

控制机制：滑动窗口

在TCP报文的头部有一个**16位的窗口大小**，用于告诉发送方接收方**可用的缓冲区大小**。

## 拥塞窗口

拥塞控制：防止发送方发的太快，使网络来不及处理，从而导致**网络拥塞**。

控制机制：拥塞窗口

## 慢启动 拥塞避免 快重传 快恢复

**慢启动：**为了防止大量数据瞬间注入网络，引起网络阻塞。慢启动算法设定，最开始窗口为1个最大报文长度。一个传输轮次增加一倍的窗口大小。当达到满开始门限后，执行拥塞避免算法。

**拥塞避免：** 每个传输轮次将窗口增加一个单位，即加法增长。

**快重传：** 当收到3个以上重复确认以后，执行快恢复算法。慢开始门限和发送窗口减半，然后发缺失的数据，进行加法增长，重新进入拥塞避免阶段。

**快恢复：**慢开始门限减半，发送拥塞窗口设定为门限加3。如果后面依旧收到重复的ACK则进行加法增长窗口，如果收到新的ACK，则拥塞窗口设定为慢开始门限的值，并重新进入拥塞避免阶段。

## TCP粘包问题

udp不会出现粘包。发送方发送的若干包数据到接收方接收时，包粘在了一起。

造成粘包的原因时因为发送端延迟发送或者接收方没有及时接收缓冲区中的数据。

通常可以使用以下三种方式来解决

1.  编程时设定立即发送的操作指令
2.  把数据长度与消息一起发送。
3.  使用特殊标记来区分消息的间隔

## HTTP和HTTPS有什么不同

HTTP协议是一种使用明文数据传输的网络协议。HTTPS协议可以理解为HTTP协议的升级，就是在HTTP的基础上增加了数据加密。在数据进行传输之前，对数据进行加密，然后再发送到服务器。这样，就算数据被第三者所截获，但是由于数据是加密的，所以你的个人信息让然是安全的。这就是HTTP和HTTPS的最大区别。

## 在浏览器地址栏键入URL，按下回车之后会经历以下流程

1.  浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;
2.  解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;
3.  浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;
4.  服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;
5.  释放 TCP连接;
6.  浏览器将该 html 文本并显示内容; 　

## UDP如何做到可靠

想要做到可靠，必须要做到无重复，无丢失，无错误，无失序。借鉴TCP的可靠机制

1.  发送时进行**编号**
2.  接收方收到数据发出**应答信号**（超时重传，3次确认重传）
3.  增加**校验位**

## NAT DNS ARP

1.  NAT用于实现从**内部IP地址到外部IP地址的映射** 
2.  DNS提供域名到IP地址的映射或者反过来 
3.  ARP提供**IP到MAC地址的映射**

## DNS

1.  递归查询：父域名**代替当前服务器递归查询**，最后依次返回 
2.  迭代查询：父域名服务器告诉当前服务器**下一次查询的位置**